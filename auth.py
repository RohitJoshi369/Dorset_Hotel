# -*- coding: utf-8 -*-
"""auth.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1VxlXOqt7lc6xjwwqp7PjmzAjxxUuISIK
"""

import streamlit as st

def require_role(required_role: str):
    # Not logged in
    if not st.session_state.get("logged_in"):
        st.warning("Please login first.")
        st.switch_page("pages/1_Login.py")
        st.stop()   # ðŸ”´ REQUIRED

    user_role = st.session_state.get("role")

    # Uploader can access everything
    if user_role == "uploader":
        return

    # Searcher can access search pages
    if required_role == "searcher" and user_role == "searcher":
        return

    # Redirect based on role
    if user_role == "searcher":
        st.switch_page("pages/3_Search_Bhagat.py")
        st.stop()   # ðŸ”´ REQUIRED
    else:
        st.switch_page("pages/1_Login.py")
        st.stop()   # ðŸ”´ REQUIRED
